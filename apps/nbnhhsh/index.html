<!DOCTYPE html>
<html lang="zh-hant-TW">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale-1">
        <title>胡斯凱的網站</title>
        <link rel="icon" href="../../images/favicon.png">
        <!--描述-->
        <meta name="description" content="鏈接更寬闊的世界">
        <!--關鍵詞-->
        <meta name="keywords" content="胡斯凯,胡斯凱,hooskai,siberia husky,SiberiaHusky">
        <!--Bootstrap-->
        <link href="//mirror.hooskai.ml/bootstrap/bootstrap.min.css" rel="stylesheet">
        <!--fontawesome-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
        <!--styles-->
        <link href="../../assets/style.css" rel="stylesheet">
    </head>
    <body>
       <h1>简中網路縮寫查詢</h1>
        <input type="text" id="query"> 
      <button onclick="search()">查詢</button>

      <div id="result"></div>

        <script>
            function search() {
                const query = document.getElementById('query').value;
                fetch(`https://lab.magiconch.com/api/nbnhhsh/guess`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: query })
                })
                .then(res => res.json())
                .then(data => {
                    const result = document.getElementById('result');
                    result.innerHTML = '';
                    if (data.length === 0) {
                        result.innerHTML += '<p>無匹配結果</p>';
                    } else {
                        data.forEach(d => {
                            let trans = '';
                            if (d.trans) {
                                trans = ': ' + d.trans.join(', ');
                            }
                            result.innerHTML += `<p>${d.name}${trans}</p>`;
                        });
                    }
                })

                .catch(err => {
                    const result = document.getElementById('result');
                    result.innerHTML = '';
                    result.innerHTML += '<p>查詢失敗</p>';
                    console.error(err);
                });
            }
        </script>

        <p>此網頁基於 <a href="//lab.magiconch.com/nbnhhsh/" target="_blank">能不能好好说话</a></p>
        <!--footer-->
        <footer class="panel-footer d-flex" style="margin: 16px;">
            <p style="font-family: 'Montserrat';">&copy; 2019-Now SiberiaHusky</p>
            <a style="margin-left: 16px;" href="//icp.gov.moe/?keyword=20238314"><p style="font-family: 'Montserrat';">萌ICP备20238314号</p></a>
        </footer>
        <!--script-->
        <script src="//mirror.hooskai.ml/bootstrap/bootstrap.bundle.min.js"></script>
    </body>
</html>