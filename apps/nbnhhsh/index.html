<!DOCTYPE html>
<html lang="zh-hans-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale-1">
        <title>能不能好好说话 | 胡斯凯的网站</title>
        <link rel="icon" href="//hooskai.ml/images/favicon.png">
        <!--description-->
        <meta name="description" content="链接更宽阔的世界">
        <!--keywords-->
        <meta name="keywords" content="胡斯凯,胡斯凱,hooskai,siberia husky,SiberiaHusky">
        <!--bootstrap-->
        <link href="//mirror.hooskai.ml/bootstrap/bootstrap.min.css" rel="stylesheet">
        <!--fontawesome-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
        <!--styles-->
        <link href="//hooskai.ml/assets/style.css" rel="stylesheet">
    </head>
    <body>
        <!--navbar-->
        <nav class="navbar navbar-dark fixed-top" style="background-color: #1e86dd;">
            <div class="container-fluid">
                <a class="navbar-brand">能不能好好说话</a>
                <button class="btn btn-outline" id="backBtn" style="color: white;" type="button">
                    <i class="fa-solid fa-arrow-left"></i>
                </button>
            </div>
        </nav>
        <!--back script-->
        <script>
            var backButton = document.getElementById("backBtn");
            backButton.addEventListener("click", function() {
                window.location.replace('//hooskai.ml')
            });
        </script>
        <!--card-->
        <div class="card" style="scroll-padding-top: 70px; margin: 16px; margin-top: 70px;">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="fa-solid fa-circle-info"></i> 简中网络用语查询
                </h5>
                <div style="margin-bottom: -16px;">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <input type="text" class="form-control" id="query"> 
                        </div>
                        <div class="col-auto">
                            <button type="button" class="btn btn-primary" onclick="search()">查询</button>
                        </div>
                    </div>

                    <p class="card-text">
                        <div id="result"></div>
                    </p>
                </div>
            </div>
        </div>
        <script>
            function search() {
                const query = document.getElementById('query').value;
                fetch(`https://lab.magiconch.com/api/nbnhhsh/guess`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: query })
                })
                .then(res => res.json())
                .then(data => {
                    const result = document.getElementById('result');
                    result.innerHTML = '';
                    if (data.length === 0) {
                        result.innerHTML += '<p style="margin-bottom: -16px;">暂无匹配结果</p>';
                    } else {
                        data.forEach(d => {
                            let trans = '';
                            if (d.trans) {
                                trans = ': ' + d.trans.join(', ');
                            }
                            result.innerHTML += `<p style="margin-bottom: -16px;">${d.name}${trans}</p>`;
                        });
                    }
                })

                .catch(err => {
                    const result = document.getElementById('result');
                    result.innerHTML = '';
                    result.innerHTML += '<p>查询失败</p>';
                    console.error(err);
                });
            }
        </script>

        <p style="margin: 16px; margin-bottom: -16px; color: rgba(0, 0, 0, 0.25)">此网页基于 <a href="//lab.magiconch.com/nbnhhsh/" target="_blank" style="color: rgba(0, 0, 0, 0.25)">能不能好好说话</a></p>
        <!--footer-->
        <footer class="panel-footer d-flex" style="margin: 16px;">
            <p style="font-family: 'Montserrat';">&copy; 2019-Now SiberiaHusky</p>
            <a style="margin-left: 16px;" href="//icp.gov.moe/?keyword=20238314"><p style="font-family: 'Montserrat';">萌ICP备20238314号</p></a>
        </footer>
        <!--script-->
        <script src="//mirror.hooskai.ml/bootstrap/bootstrap.bundle.min.js"></script>
    </body>
</html>